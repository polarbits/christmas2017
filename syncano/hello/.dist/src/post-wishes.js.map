{"version":3,"sources":["post-wishes.js"],"names":["ctx","data","response","args","sender","receiver","wishes","newCrypto","randomBytes","toString","console","log","where","list","create","cryptoId","then","wishObj","json","msg","id"],"mappings":";;;;;;AAAA;;;;AACA;;;;;;kBAEgBA,GAAD,IAAS;AACtB,QAAM,EAACC,IAAD,EAAMC,QAAN,KAAkB,6BAAQF,GAAR,CAAxB;;AAEA,MAAIA,IAAIG,IAAJ,CAASC,MAAT,IAAmBJ,IAAIG,IAAJ,CAASE,QAA5B,IAAwCL,IAAIG,IAAJ,CAASG,MAArD,EAA6D;AAC3D,QAAIC,YAAY,iBAAOC,WAAP,CAAmB,CAAnB,EAAsBC,QAAtB,CAA+B,KAA/B,CAAhB;AACAC,YAAQC,GAAR,CAAYJ,SAAZ;AACAG,YAAQC,GAAR,CAAYV,KAAKK,MAAL,CAAYM,KAAZ,CAAkB,UAAlB,EAA8BL,SAA9B,EAAyCM,IAAzC,EAAZ;;AAEA,WAAOZ,KAAKK,MAAL,CAAYM,KAAZ,CAAkB,UAAlB,EAA8BL,SAA9B,EAAyCM,IAAzC,EAAP,EACA;AACEN,kBAAY,iBAAOC,WAAP,CAAmB,CAAnB,EAAsBC,QAAtB,CAA+B,KAA/B,CAAZ;AACD;AACHR,SAAKK,MAAL,CAAYQ,MAAZ,CAAmB;AACjBV,cAAQJ,IAAIG,IAAJ,CAASC,MADA;AAEjBC,gBAAUL,IAAIG,IAAJ,CAASE,QAFF;AAGjBC,cAAQN,IAAIG,IAAJ,CAASG,MAHA;AAIjBS,gBAAUR;AACV;AALiB,KAAnB,EAOCS,IAPD,CAOMC,WAAW;AACff,eAASgB,IAAT,CAAc,EAACC,KAAM,GAAEnB,IAAIG,IAAJ,CAASG,MAAO,IAAGN,IAAIG,IAAJ,CAASE,QAAS,QAAOL,IAAIG,IAAJ,CAASC,MAAO,qBAAoBa,QAAQG,EAAG,wBAAuBH,QAAQG,EAAG,EAAtI,EAAd;AACD,KATD;AAUD;AACA,C","file":"post-wishes.js","sourcesContent":["import Syncano from 'syncano-server'\r\nimport crypto from 'crypto'\r\n\r\nexport default (ctx) => {\r\n  const {data,response} = Syncano(ctx)\r\n\r\n  if (ctx.args.sender && ctx.args.receiver && ctx.args.wishes) {\r\n    var newCrypto = crypto.randomBytes(2).toString('hex')\r\n    console.log(newCrypto)\r\n    console.log(data.wishes.where(\"cryptoId\", newCrypto).list())\r\n\r\n    while (data.wishes.where(\"cryptoId\", newCrypto).list())\r\n    {\r\n      newCrypto = crypto.randomBytes(2).toString('hex')\r\n    }\r\n  data.wishes.create({\r\n    sender: ctx.args.sender,\r\n    receiver: ctx.args.receiver,\r\n    wishes: ctx.args.wishes,\r\n    cryptoId: newCrypto\r\n    //, wishDate: Date.now()\r\n  })\r\n  .then(wishObj => {\r\n    response.json({msg: `${ctx.args.wishes} ${ctx.args.receiver}! od ${ctx.args.sender}!. Wishes with ID ${wishObj.id} created! Wishes id: ${wishObj.id}`})\r\n  })\r\n}\r\n}"]}